{
	"$schema": "https://turbo.build/schema.json",
	"tasks": {
		"lint": {
			"inputs": [
				"src/**",
				"test/**",
				"tests/**",
				"examples/**",
				"*.ts",
				"*.tsx",
				"*.js",
				"*.mjs",
				"*.json"
			]
		},
		"test": {
			"dependsOn": ["^build", "build"],
			"inputs": [
				"src/**",
				"test/**",
				"tests/**",
				"__tests__/**",
				"*.ts",
				"*.tsx",
				"vitest.config.*",
				"tsconfig.json"
			],
			"env": [
				"AWS_ACCESS_KEY_ID",
				"AWS_SECRET_ACCESS_KEY",
				"AWS_REGION",
				"AWS_KMS_KEY_ID",
				"GOOGLE_PROJECT_ID",
				"GOOGLE_LOCATION",
				"GOOGLE_KEYRING",
				"GOOGLE_KEY_NAME",
				"GOOGLE_KEY_NAME_VERSION",
				"E2E_AWS_KMS_TEST_ENABLE",
				"E2E_GCP_KMS_TEST_ENABLE",
				"GOOGLE_APPLICATION_CREDENTIALS"
			]
		},
		// Avoid running CPU intesive tests in parallel
		"@mysten/walrus#test": {
			"dependsOn": ["^build", "build", "@mysten/walrus-wasm#test"]
		},
		"@mysten/seal#test": {
			"dependsOn": ["^build", "build", "@mysten/walrus#test"]
		},
		"test:e2e": {
			"dependsOn": ["^build", "build"],
			"inputs": [
				"src/**",
				"test/**",
				"tests/**",
				"__tests__/**",
				"*.ts",
				"*.tsx",
				"vitest.config.*",
				"tsconfig.json"
			],
			"cache": false,
			"env": [
				"AWS_ACCESS_KEY_ID",
				"AWS_SECRET_ACCESS_KEY",
				"AWS_REGION",
				"AWS_KMS_KEY_ID",
				"GOOGLE_PROJECT_ID",
				"GOOGLE_LOCATION",
				"GOOGLE_KEYRING",
				"GOOGLE_KEY_NAME",
				"GOOGLE_KEY_NAME_VERSION",
				"E2E_AWS_KMS_TEST_ENABLE",
				"E2E_GCP_KMS_TEST_ENABLE",
				"GOOGLE_APPLICATION_CREDENTIALS"
			]
		},
		"dev": {
			"dependsOn": ["^build"],
			"cache": false,
			"persistent": true
		},
		"build": {
			"dependsOn": ["^build"],
			"inputs": ["src/**", "*.ts", "*.mjs", "tsconfig.json", "tsdown.config.ts", "package.json"],
			"outputs": [
				"build/**",
				"dist/**",
				"storybook-static/**",
				".next/**",
				"!.next/cache/**",
				"pkg/**"
			]
		}
	},
	"globalEnv": ["VERCEL_ENV", "VITE_NETWORK", "VITE_VERCEL_ANALYTICS_ID", "VITE_SENTRY_SAMPLE_RATE"]
}
